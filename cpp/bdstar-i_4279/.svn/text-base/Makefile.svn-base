#############################################################################
# Makefile for building $(MQDIR)/$(MQARCH)/bin/bdi-daemon
# Generated by tmake at 13:03, 2011/09/22
#     Project: bdi
#    Template: app
#############################################################################

####### Compiler, tools and options

RELEASE	=	n

ifeq ($(MQARCH), arm)
CC      =   arm-linux-gcc
CXX     =   arm-linux-g++
AR      =   arm-linux-ar cqs
LINK	=	arm-linux-gcc
else
CC      =   gcc
CXX     =   g++
AR      =   ar cqs
LINK	=	g++
endif

CFLAGS	=	-pipe -Wall -W -D_REENTRANT -D$(MQARCH) -D$(MQPROJECT) -D$(MQHARDWARE) 
CXXFLAGS=	-pipe -fno-exceptions -fno-rtti -Wall -W -D_REENTRANT -D$(MQARCH) -D$(MQPROJECT) -D$(MQHARDWARE) 

ifeq ($(RELEASE), y)
CFLAGS	+=      -O2 -DNDEBUG
CXXFLAGS+=      -O2 -finline-functions -DNDEBUG
else
CFLAGS	+=      -g
CXXFLAGS+=      -g -fno-default-inline
endif

INCPATH	=	-I. -I$(MQSDK)/include 
LINK	=	arm-linux-gcc
LFLAGS	=	
LIBS	=	$(SUBLIBS) -lstdc++ -lpthread -L$(MQDIR)/$(MQARCH)/lib -lmapi -lcapi -ldbus-1

TAR	=	tar -cf
GZIP	=	gzip -9f

####### Files

HEADERS =	bdi_define.h \
		bdi_util.h \
		bdi_event_codec.h \
		bdi_event.h \
		bdi_rtdata.h \
		bdi_submit.h \
		bdi_reply.h \
		bdi_message.h \
		bdi_gps_event.h \
		bdi_mobile_event.h \
		bdi_link.h \
		bdi_unix_stream.h \
		bdi_event_list.h \
		bdi_thread.h \
		bdi_gps_thread.h \
		bdi_imsg.h \
		bdi_daemon.h \
		bdi_host.h \
		config.h \
		debug_alloc.h \
		rbglobal.h \
		bdi_mp_thread.h \
		bdi_posopt.h
SOURCES =	bdi_util.cpp \
		bdi_event_codec.cpp \
		bdi_event.cpp \
		bdi_rtdata.cpp \
		bdi_submit.cpp \
		bdi_reply.cpp \
		bdi_message.cpp \
		bdi_gps_event.cpp \
		bdi_mobile_event.cpp \
		bdi_unix_stream.cpp \
		bdi_event_list.cpp \
		bdi_thread.cpp \
		bdi_gps_thread.cpp \
		bdi_imsg.cpp \
		bdi_daemon.cpp \
		bdi_host.cpp \
		config.cpp \
		debug_alloc.cpp \
		rbglobal.c \
		bdi_mp_thread.cpp \
		bdi_posopt.cpp
OBJECTS =	Obj/bdi_util.o \
		Obj/bdi_event_codec.o \
		Obj/bdi_event.o \
		Obj/bdi_rtdata.o \
		Obj/bdi_submit.o \
		Obj/bdi_reply.o \
		Obj/bdi_message.o \
		Obj/bdi_gps_event.o \
		Obj/bdi_mobile_event.o \
		Obj/bdi_unix_stream.o \
		Obj/bdi_event_list.o \
		Obj/bdi_thread.o \
		Obj/bdi_gps_thread.o \
		Obj/bdi_imsg.o \
		Obj/bdi_daemon.o \
		Obj/bdi_host.o \
		Obj/config.o \
		Obj/debug_alloc.o \
		Obj/rbglobal.o \
		Obj/bdi_mp_thread.o \
		Obj/bdi_posopt.o
INTERFACES =	
UICDECLS =	
UICIMPLS =	
DIST	=	
TARGET	=	$(MQDIR)/$(MQARCH)/bin/bdi-daemon
INTERFACE_DECL_PATH = .
COMMON_HEADERS =	bdi_imsg.h \
		bdi_define.h
COMMON_HEADER_PATH =	$(MQSDK)/include/bdstar-i

####### Implicit rules

.SUFFIXES: .cpp .cxx .cc .C .c

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.cxx.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.cc.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.C.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.c.o:
	$(CC) -c $(CFLAGS) $(INCPATH) -o $@ $<

####### Build rules


all: def copyheader

def: $(TARGET)

$(TARGET): $(UICDECLS) $(OBJECTS)
	$(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(LIBS)





copyheader: 
	@for i in $(COMMON_HEADERS); do { if ( ! test -e "$(COMMON_HEADER_PATH)/`basename $$i`" || ! `diff $$i $(COMMON_HEADER_PATH) > /dev/null` ); then cp -f $$i $(COMMON_HEADER_PATH); fi; }; done


clean:
	-rm -f $(OBJECTS) $(UICIMPLS) $(UICDECLS) $(TARGET)
	-rm -f *~ core

####### Sub-libraries


###### Combined headers


####### Compile

Obj/bdi_util.o: bdi_util.cpp \
		bdi_util.h \
		debug_alloc.h \
		bdi_define.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_util.o bdi_util.cpp

Obj/bdi_event_codec.o: bdi_event_codec.cpp \
		debug_alloc.h \
		rbglobal.h \
		bdi_util.h \
		bdi_define.h \
		bdi_event_codec.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_event_codec.o bdi_event_codec.cpp

Obj/bdi_event.o: bdi_event.cpp \
		rbglobal.h \
		bdi_rtdata.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		debug_alloc.h \
		bdi_event_codec.h \
		bdi_submit.h \
		bdi_reply.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_event.o bdi_event.cpp

Obj/bdi_rtdata.o: bdi_rtdata.cpp \
		debug_alloc.h \
		rbglobal.h \
		bdi_message.h \
		bdi_rtdata.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		bdi_event_codec.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_rtdata.o bdi_rtdata.cpp

Obj/bdi_submit.o: bdi_submit.cpp \
		debug_alloc.h \
		bdi_submit.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		bdi_event_codec.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_submit.o bdi_submit.cpp

Obj/bdi_reply.o: bdi_reply.cpp \
		debug_alloc.h \
		bdi_reply.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		bdi_event_codec.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_reply.o bdi_reply.cpp

Obj/bdi_message.o: bdi_message.cpp \
		bdi_message.h \
		bdi_rtdata.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		debug_alloc.h \
		bdi_event_codec.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_message.o bdi_message.cpp

Obj/bdi_gps_event.o: bdi_gps_event.cpp \
		debug_alloc.h \
		bdi_gps_event.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		bdi_event_codec.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_gps_event.o bdi_gps_event.cpp

Obj/bdi_mobile_event.o: bdi_mobile_event.cpp \
		bdi_mobile_event.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		debug_alloc.h \
		bdi_event_codec.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_mobile_event.o bdi_mobile_event.cpp

Obj/bdi_unix_stream.o: bdi_unix_stream.cpp \
		bdi_unix_stream.h \
		bdi_link.h \
		bdi_define.h \
		bdi_util.h \
		debug_alloc.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_unix_stream.o bdi_unix_stream.cpp

Obj/bdi_event_list.o: bdi_event_list.cpp \
		debug_alloc.h \
		bdi_rtdata.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		bdi_event_codec.h \
		bdi_event_list.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_event_list.o bdi_event_list.cpp

Obj/bdi_thread.o: bdi_thread.cpp \
		rbglobal.h \
		debug_alloc.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		bdi_event_codec.h \
		bdi_event_list.h \
		bdi_unix_stream.h \
		bdi_link.h \
		bdi_daemon.h \
		bdi.h \
		bdi_rtdata.h \
		bdi_submit.h \
		bdi_reply.h \
		bdi_mobile_event.h \
		bdi_thread.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_thread.o bdi_thread.cpp

Obj/bdi_gps_thread.o: bdi_gps_thread.cpp \
		$(MQSDK)/include/capi/capi.h \
		$(MQSDK)/include/capi/bd_urc.h \
		$(MQSDK)/include/capi/bd.h \
		debug_alloc.h \
		rbglobal.h \
		bdi_event_list.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		bdi_event_codec.h \
		bdi_daemon.h \
		bdi.h \
		bdi_rtdata.h \
		bdi_submit.h \
		bdi_reply.h \
		bdi_mobile_event.h \
		bdi_link.h \
		bdi_unix_stream.h \
		bdi_gps_event.h \
		bdi_gps_thread.h \
		bdi_thread.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_gps_thread.o bdi_gps_thread.cpp

Obj/bdi_imsg.o: bdi_imsg.cpp \
		bdi_gps_event.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		debug_alloc.h \
		bdi_event_codec.h \
		bdi_mobile_event.h \
		bdi_message.h \
		bdi_rtdata.h \
		bdi_imsg.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_imsg.o bdi_imsg.cpp

Obj/bdi_daemon.o: bdi_daemon.cpp \
		config.h \
		debug_alloc.h \
		rbglobal.h \
		bdi_util.h \
		bdi_define.h \
		bdi_event_list.h \
		bdi_event.h \
		bdi_event_codec.h \
		bdi_thread.h \
		bdi_gps_thread.h \
		bdi_gps_event.h \
		bdi_imsg.h \
		bdi_host.h \
		bdi_daemon.h \
		bdi.h \
		bdi_rtdata.h \
		bdi_submit.h \
		bdi_reply.h \
		bdi_mobile_event.h \
		bdi_link.h \
		bdi_unix_stream.h \
		bdi_mp_thread.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_daemon.o bdi_daemon.cpp

Obj/bdi_host.o: bdi_host.cpp \
		$(MQSDK)/include/mapi/mapi.h \
		rbglobal.h \
		bdi_gps_thread.h \
		bdi_thread.h \
		bdi_gps_event.h \
		bdi_event.h \
		bdi_define.h \
		bdi_util.h \
		debug_alloc.h \
		bdi_event_codec.h \
		bdi_rtdata.h \
		bdi_message.h \
		bdi_daemon.h \
		bdi.h \
		bdi_submit.h \
		bdi_reply.h \
		bdi_mobile_event.h \
		bdi_link.h \
		bdi_unix_stream.h \
		bdi_mp_thread.h \
		bdi_event_list.h \
		bdi_imsg.h \
		bdi_host.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_host.o bdi_host.cpp

Obj/config.o: config.cpp \
		debug_alloc.h \
		config.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/config.o config.cpp

Obj/debug_alloc.o: debug_alloc.cpp \
		debug_alloc.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/debug_alloc.o debug_alloc.cpp

Obj/rbglobal.o: rbglobal.c \
		rbglobal.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o Obj/rbglobal.o rbglobal.c

Obj/bdi_mp_thread.o: bdi_mp_thread.cpp \
		$(MQSDK)/include/mapi/mapi.h \
		$(MQSDK)/include/mapi/cdma_req.h \
		$(MQSDK)/include/mapi/gsm_req.h \
		bdi_unix_stream.h \
		bdi_thread.h \
		bdi_define.h \
		bdi_util.h \
		debug_alloc.h \
		rbglobal.h \
		bdi_event_list.h \
		bdi_mp_thread.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_mp_thread.o bdi_mp_thread.cpp

Obj/bdi_posopt.o: bdi_posopt.cpp 
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o Obj/bdi_posopt.o bdi_posopt.cpp


####### End of Makefile
